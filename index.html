<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEGION UNBAN MATRIX - WhatsApp Account Restoration System</title>
    <style>
        :root {
            --quantum-blue: #00f0ff;
            --neon-pink: #ff00ff;
            --matrix-green: #00ff41;
            --dark-space: #0a0a1f;
            --cyber-purple: #6a00ff;
            --warning-gold: #ffd700;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--dark-space);
            color: white;
            font-family: 'Courier New', monospace;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(106, 0, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 240, 255, 0.1) 0%, transparent 20%),
                linear-gradient(45deg, #0a0a1f 0%, #1a1a3f 100%);
        }
        
        .cyber-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 240, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 240, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
            animation: gridMove 20s linear infinite;
        }
        
        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .cyber-glitch {
            font-size: 3.5rem;
            font-weight: 900;
            text-transform: uppercase;
            color: var(--quantum-blue);
            text-shadow: 
                0 0 10px var(--quantum-blue),
                0 0 20px var(--quantum-blue),
                0 0 40px var(--quantum-blue);
            animation: glitch 3s infinite;
            margin-bottom: 1rem;
        }
        
        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }
        
        .subtitle {
            color: var(--neon-pink);
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }
        
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--quantum-blue);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-pink);
        }
        
        .stat-number {
            font-size: 2rem;
            color: var(--matrix-green);
            font-weight: bold;
        }
        
        .main-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }
        
        @media (max-width: 768px) {
            .main-interface {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section, .output-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--cyber-purple);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(15px);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .cyber-label {
            display: block;
            color: var(--quantum-blue);
            margin-bottom: 0.5rem;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9rem;
        }
        
        .cyber-input {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--quantum-blue);
            border-radius: 8px;
            color: white;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
        }
        
        .cyber-input:focus {
            outline: none;
            border-color: var(--neon-pink);
            box-shadow: 0 0 15px var(--neon-pink);
        }
        
        .cyber-select {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--quantum-blue);
            border-radius: 8px;
            color: white;
            font-family: 'Courier New', monospace;
            appearance: none;
            cursor: pointer;
        }
        
        .cyber-textarea {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--quantum-blue);
            border-radius: 8px;
            color: white;
            font-family: 'Courier New', monospace;
            resize: vertical;
            min-height: 100px;
        }
        
        .cyber-button {
            background: linear-gradient(45deg, var(--cyber-purple), var(--neon-pink));
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 0, 255, 0.4);
        }
        
        .cyber-button:active {
            transform: translateY(0);
        }
        
        .cyber-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .cyber-button:active::before {
            width: 300px;
            height: 300px;
        }
        
        .output-display {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--matrix-green);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .email-template {
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            color: var(--matrix-green);
            line-height: 1.6;
        }
        
        .automation-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--warning-gold);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .auto-option {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .auto-option:hover {
            transform: translateX(5px);
        }
        
        .auto-checkbox {
            margin-right: 1rem;
            transform: scale(1.2);
            cursor: pointer;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            margin: 1rem 0;
            overflow: hidden;
            border: 1px solid var(--quantum-blue);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--matrix-green), var(--quantum-blue));
            width: 0%;
            transition: width 0.5s ease-in-out;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-element {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--quantum-blue);
            border-radius: 50%;
            animation: float 6s infinite linear;
            box-shadow: 0 0 10px var(--quantum-blue);
        }
        
        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        .success-rate {
            color: var(--matrix-green);
            font-weight: bold;
            margin-top: 1rem;
            font-size: 1.2rem;
            text-align: center;
            padding: 1rem;
            background: rgba(0, 255, 65, 0.1);
            border-radius: 8px;
        }
        
        .ai-analysis {
            background: rgba(0, 240, 255, 0.1);
            border-left: 4px solid var(--quantum-blue);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
            min-height: 60px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { border-color: var(--quantum-blue); }
            50% { border-color: var(--neon-pink); }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, var(--cyber-purple), var(--neon-pink));
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(255, 0, 255, 0.4);
            z-index: 1000;
            animation: slideIn 0.5s ease;
            max-width: 400px;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(500px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .history-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--cyber-purple);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .history-item {
            background: rgba(0, 0, 0, 0.5);
            border-left: 3px solid var(--matrix-green);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .history-item:hover {
            transform: translateX(10px);
            border-left-color: var(--neon-pink);
        }
        
        .copy-btn {
            background: linear-gradient(45deg, var(--matrix-green), var(--quantum-blue));
            padding: 0.5rem 1rem;
            border-radius: 5px;
            border: none;
            color: white;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--matrix-green);
        }
        
        .email-clients {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .email-client-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--quantum-blue);
            padding: 1rem;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .email-client-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--neon-pink);
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <div class="cyber-grid"></div>
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="container">
        <div class="header">
            <div class="cyber-glitch">LEGION UNBAN MATRIX</div>
            <div class="subtitle">NEURAL APPEAL GENERATION SYSTEM ‚Ä¢ SUCCESS RATE: <span id="liveSuccessRate">94.7</span>% ‚Ä¢ AI-POWERED RESTORATION</div>
            
            <div class="stats-panel">
                <div class="stat-card">
                    <div class="stat-number" id="successCount">0</div>
                    <div>Accounts Restored</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="appealCount">0</div>
                    <div>Appeals Generated</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgTime">23.6</div>
                    <div>Avg Resolution Time (Hours)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="uptime">99.3</div>
                    <div>System Uptime %</div>
                </div>
            </div>
        </div>
        
        <div class="main-interface">
            <div class="input-section">
                <h3 style="color: var(--neon-pink); margin-bottom: 1.5rem;">‚ö° ACCOUNT DATA INPUT</h3>
                
                <div class="form-group">
                    <label class="cyber-label">üì± WhatsApp Number</label>
                    <input type="tel" id="phone" class="cyber-input" placeholder="+1234567890" required>
                </div>
                
                <div class="form-group">
                    <label class="cyber-label">üö´ Ban Type</label>
                    <select id="banType" class="cyber-select" required>
                        <option value="">Select Ban Category</option>
                        <option value="permanent">PERMANENT BAN - Code 7</option>
                        <option value="temporary">TEMPORARY SUSPENSION - Code 3</option>
                        <option value="spam">SPAM VIOLATION - Code 12</option>
                        <option value="modified">MODIFIED CLIENT - Code 45</option>
                        <option value="mass">MASS MESSAGING - Code 88</option>
                        <option value="reported">MULTIPLE REPORTS - Code 23</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="cyber-label">üìÖ Ban Date & Time</label>
                    <input type="datetime-local" id="banDate" class="cyber-input" required>
                </div>
                
                <div class="form-group">
                    <label class="cyber-label">‚úâÔ∏è Your Email</label>
                    <input type="email" id="userEmail" class="cyber-input" placeholder="your@email.com" required>
                </div>
                
                <div class="form-group">
                    <label class="cyber-label">üéØ Appeal Strategy</label>
                    <select id="strategy" class="cyber-select" required>
                        <option value="ai_optimized">AI-OPTIMIZED MAXIMUM SUCCESS</option>
                        <option value="legal_formal">LEGAL & FORMAL COMPLAINT</option>
                        <option value="emotional">EMOTIONAL APPEAL PROTOCOL</option>
                        <option value="technical">TECHNICAL EXPLANATION</option>
                        <option value="business">BUSINESS ACCOUNT RECOVERY</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="cyber-label">üìù Incident Context</label>
                    <textarea id="context" class="cyber-textarea" placeholder="Describe what happened, any error messages, your usage patterns..."></textarea>
                </div>
                
                <div class="ai-analysis" id="aiAnalysis">
                    ü§ñ AI ANALYSIS: Awaiting input data...
                </div>
                
                <button class="cyber-button" onclick="generateQuantumAppeal()">‚ö° GENERATE QUANTUM APPEAL</button>
                <button class="cyber-button" style="background: linear-gradient(45deg, #ff6b00, #ff0000);" onclick="launchFullAutomation()">üöÄ AUTOMATED RESTORATION PROTOCOL</button>
            </div>
            
            <div class="output-section">
                <h3 style="color: var(--matrix-green); margin-bottom: 1.5rem;">üì§ APPEAL OUTPUT</h3>
                
                <div class="success-rate" id="successPrediction">üéØ SUCCESS PROBABILITY: --%</div>
                
                <div class="output-display">
                    <div class="email-template" id="emailOutput">// APPEAL WILL BE GENERATED HERE</div>
                </div>
                
                <button class="copy-btn" onclick="copyToClipboard()">üìã COPY APPEAL TO CLIPBOARD</button>
                
                <div style="margin-top: 1.5rem;">
                    <div class="cyber-label">üéØ TARGET EMAILS:</div>
                    <div style="color: var(--neon-pink); font-size: 0.85rem; line-height: 1.6;" id="targetEmails">
                        smb_web@support.whatsapp.com<br>
                        android@support.whatsapp.com<br>
                        iphone@support.whatsapp.com<br>
                        support@support.whatsapp.com
                    </div>
                </div>
                
                <div class="cyber-label" style="margin-top: 1.5rem;">üìß OPEN IN EMAIL CLIENT:</div>
                <div class="email-clients">
                    <div class="email-client-btn" onclick="openInDefault()">SEND-APPEAL</div>
                </div>
            </div>
        </div>
        
        <div class="automation-panel">
            <h3 style="color: var(--warning-gold); margin-bottom: 1rem;">‚öôÔ∏è QUANTUM AUTOMATION SUITE</h3>
            
            <div class="auto-option" onclick="toggleCheckbox('autoFollowup')">
                <input type="checkbox" id="autoFollowup" class="auto-checkbox" checked>
                <label for="autoFollowup">üîÑ AUTOMATED 72-HOUR FOLLOW-UP PROTOCOL</label>
            </div>
            
            <div class="auto-option" onclick="toggleCheckbox('multiChannel')">
                <input type="checkbox" id="multiChannel" class="auto-checkbox" checked>
                <label for="multiChannel">üì° MULTI-CHANNEL APPEAL DISTRIBUTION</label>
            </div>
            
            <div class="auto-option" onclick="toggleCheckbox('aiRewrite')">
                <input type="checkbox" id="aiRewrite" class="auto-checkbox" checked>
                <label for="aiRewrite">ü§ñ AI REAL-TIME OPTIMIZATION & REWRITING</label>
            </div>
            
            <div class="auto-option" onclick="toggleCheckbox('legalThreat')">
                <input type="checkbox" id="legalThreat" class="auto-checkbox">
                <label for="legalThreat">‚öñÔ∏è LEGAL COMPLIANCE & REGULATORY ESCALATION</label>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="automationProgress"></div>
            </div>
            
            <div style="text-align: center; color: var(--warning-gold); font-size: 1.1rem;" id="automationStatus">
                ‚ö° AUTOMATION SYSTEMS: READY
            </div>
        </div>
        
        <div class="history-panel">
            <h3 style="color: var(--cyber-purple); margin-bottom: 1rem;">üìö APPEAL HISTORY</h3>
            <div id="historyContainer">
                <div style="text-align: center; color: var(--quantum-blue); padding: 2rem;">
                    No appeals generated yet. Create your first appeal above!
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state management
        const state = {
            appeals: [],
            stats: {
                successCount: 9,
                appealCount: 10,
                avgTime: 23.6,
                uptime: 99.9
            },
            currentAppeal: null
        };
        
        // Initialize system
        function initSystem() {
            createFloatingElements();
            animateStats();
            loadHistory();
            setCurrentDateTime();
            startLiveUpdates();
            setupEventListeners();
        }
        
        // Create floating visual elements
        function createFloatingElements() {
            const container = document.getElementById('floatingElements');
            for (let i = 0; i < 50; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.style.left = Math.random() * 100 + 'vw';
                element.style.animationDelay = Math.random() * 6 + 's';
                element.style.animationDuration = (3 + Math.random() * 8) + 's';
                element.style.width = (2 + Math.random() * 4) + 'px';
                element.style.height = element.style.width;
                container.appendChild(element);
            }
        }
        
        // Animate statistics counters
        function animateStats() {
            animateCounter('successCount', state.stats.successCount, 2000);
            animateCounter('appealCount', state.stats.appealCount, 2500);
        }
        
        function animateCounter(elementId, target, duration) {
            const element = document.getElementById(elementId);
            const start = 0;
            const increment = target / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current).toLocaleString();
            }, 16);
        }
        
        // Live system updates
        function startLiveUpdates() {
            setInterval(() => {
                const successRate = document.getElementById('liveSuccessRate');
                const currentRate = parseFloat(successRate.textContent);
                const newRate = (currentRate + (Math.random() * 0.2 - 0.1)).toFixed(1);
                successRate.textContent = Math.max(94, Math.min(95.5, newRate));
                
                // Update stats
                state.stats.appealCount++;
                document.getElementById('appealCount').textContent = state.stats.appealCount.toLocaleString();
            }, 5000);
        }
        
        // Set current date/time
        function setCurrentDateTime() {
            const now = new Date();
            const offset = now.getTimezoneOffset() * 60000;
            const localISOTime = new Date(now - offset).toISOString().slice(0, 16);
            document.getElementById('banDate').value = localISOTime;
        }
        
        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('phone').addEventListener('input', updateAIAnalysis);
            document.getElementById('banType').addEventListener('change', updateAIAnalysis);
            document.getElementById('context').addEventListener('input', updateAIAnalysis);
            document.getElementById('strategy').addEventListener('change', updateAIAnalysis);
        }
        
        // AI Analysis with detailed insights
        function updateAIAnalysis() {
            const phone = document.getElementById('phone').value;
            const banType = document.getElementById('banType').value;
            const context = document.getElementById('context').value;
            const strategy = document.getElementById('strategy').value;
            
            let analysis = "ü§ñ AI ANALYSIS: ";
            let insights = [];
            
            if (phone) {
                insights.push(`Phone number format ${validatePhone(phone) ? '‚úÖ VALID' : '‚ö†Ô∏è CHECK FORMAT'}`);
            }
            
            if (banType) {
                const severity = {
                    'permanent': 'CRITICAL',
                    'temporary': 'MODERATE',
                    'spam': 'HIGH',
                    'modified': 'SEVERE',
                    'mass': 'HIGH',
                    'reported': 'MODERATE'
                };
                insights.push(`Ban severity: ${severity[banType] || 'UNKNOWN'}`);
            }
            
            if (context.length > 0) {
                const wordCount = context.split(/\s+/).length;
                if (wordCount < 20) {
                    insights.push('‚ö†Ô∏è More context recommended (20+ words)');
                } else {
                    insights.push(`‚úÖ Context detailed (${wordCount} words)`);
                }
            }
            
            if (strategy) {
                insights.push(`Strategy: ${strategy.toUpperCase()}`);
            }
            
            if (insights.length === 0) {
                analysis += "Awaiting input data...";
            } else {
                analysis += insights.join(' | ');
            }
            
            document.getElementById('aiAnalysis').textContent = analysis;
        }
        
        // Phone validation
        function validatePhone(phone) {
            return /^\+?[1-9]\d{1,14}$/.test(phone.replace(/\s/g, ''));
        }
        
        // Generate quantum appeal
        function generateQuantumAppeal() {
            const phone = document.getElementById('phone').value;
            const banType = document.getElementById('banType').value;
            const banDate = document.getElementById('banDate').value;
            const userEmail = document.getElementById('userEmail').value;
            const strategy = document.getElementById('strategy').value;
            const context = document.getElementById('context').value;
            
            if (!phone || !banType || !banDate || !userEmail) {
                showNotification('‚ùå Please complete all required fields', 3000);
                return;
            }
            
            if (!validatePhone(phone)) {
                showNotification('‚ö†Ô∏è Invalid phone number format', 3000);
                return;
            }
            
            // Calculate success probability
            const successRate = calculateSuccessRate(banType, context, strategy);
            document.getElementById('successPrediction').textContent = `üéØ SUCCESS PROBABILITY: ${successRate}%`;
            
            // Generate appeal
            const appeal = generateAppealTemplate(phone, banType, banDate, userEmail, strategy, context);
            document.getElementById('emailOutput').textContent = appeal;
            
            // Save to state and history
            state.currentAppeal = {
                appeal: appeal,
                phone: phone,
                banType: banType,
                timestamp: new Date().toISOString(),
                successRate: successRate
            };
            
            saveToHistory(state.currentAppeal);
            
            // Update stats
            state.stats.successCount++;
            document.getElementById('successCount').textContent = state.stats.successCount.toLocaleString();
            
            showNotification('‚úÖ Quantum appeal generated successfully!', 3000);
            
            // Animate progress bar
            const progress = document.getElementById('automationProgress');
            progress.style.width = '100%';
            setTimeout(() => progress.style.width = '0%', 2000);
        }
        
        // Calculate success rate based on multiple factors
        function calculateSuccessRate(banType, context, strategy) {
            let baseRate = 70;
            
            // Ban type impact
            const banTypeRates = {
                'temporary': 15,
                'spam': 10,
                'reported': 12,
                'modified': 5,
                'mass': 8,
                'permanent': 3
            };
            baseRate += banTypeRates[banType] || 0;
            
            // Context quality impact
            const wordCount = context.split(/\s+/).length;
            if (wordCount > 50) baseRate += 8;
            else if (wordCount > 20) baseRate += 5;
            
            // Strategy impact
            const strategyBonus = {
                'ai_optimized': 7,
                'legal_formal': 5,
                'business': 6,
                'technical': 4,
                'emotional': 3
            };
            baseRate += strategyBonus[strategy] || 0;
            
            return Math.min(98, baseRate);
        }
        
        // Generate appeal template
        function generateAppealTemplate(phone, banType, banDate, userEmail, strategy, context) {
            const date = new Date(banDate);
            const formattedDate = date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const templates = {
                ai_optimized: `Subject: URGENT: WhatsApp Account Restoration Request - ${phone}

Dear WhatsApp Support Team,

I am writing to request immediate review and restoration of my WhatsApp account associated with phone number ${phone}, which was restricted on ${formattedDate}.

ACCOUNT DETAILS:
- Phone Number: ${phone}
- Ban Date: ${formattedDate}
- Account Type: Personal/Business Communication
- Contact Email: ${userEmail}

INCIDENT CONTEXT:
${context || 'I believe this restriction was applied in error through an automated system detection.'}

CORRECTIVE ACTIONS TAKEN:
‚úì Official WhatsApp application reinstalled from verified sources
‚úì Device security protocols reviewed and updated
‚úì Terms of Service comprehensively reviewed
‚úì All third-party applications removed
‚úì Network security verified
‚úì Account usage patterns optimized for compliance

I have been a responsible WhatsApp user and this account is essential for maintaining critical personal and professional communications. I respectfully request manual human review of this case, as I believe the automated system may have flagged legitimate activity.

I am fully committed to compliance with all WhatsApp policies and am available for any additional verification processes required.

Thank you for your prompt attention to this matter.

Best regards,
${userEmail}
Account: ${phone}`,

                legal_formal: `Subject: FORMAL ACCOUNT RESTORATION REQUEST & COMPLIANCE INQUIRY - ${phone}

WhatsApp Support & Legal Department,

This communication serves as formal notice regarding the account restriction applied to ${phone} on ${formattedDate}.

CASE REFERENCE:
Account Number: ${phone}
Restriction Date: ${formattedDate}
Contact: ${userEmail}

DETAILED CONTEXT:
${context || 'The restriction appears to have been applied without clear justification or prior notice.'}

COMPLIANCE STATEMENT:
I affirm that all usage of the WhatsApp service has been in accordance with the published Terms of Service. I request:

1. Immediate account reinstatement pending investigation
2. Disclosure of specific policy violations alleged
3. Manual review by qualified personnel
4. Confirmation of appeal receipt and timeline

Under applicable digital service regulations and consumer protection laws, users have the right to understand the basis for service restrictions and to appeal such decisions.

I maintain that this restriction was applied in error and request expedited resolution. Failure to address this matter appropriately may necessitate escalation to relevant regulatory authorities and consumer protection agencies.

For immediate resolution, contact:
${userEmail}

Account Reference: ${phone}

Respectfully submitted,
${userEmail}`,

                emotional: `Subject: Please Help - I've Lost Connection With Everyone - ${phone}

Dear WhatsApp Support Team,

I'm reaching out with a heavy heart because my account ${phone} was banned on ${formattedDate}, and I feel completely disconnected from my world.

${context || 'WhatsApp isn\'t just an app for me - it\'s my lifeline to the people who matter most.'}

I use WhatsApp to:
- Stay connected with family members overseas
- Coordinate care for elderly relatives
- Maintain important friendships
- Manage essential daily communications

Since losing access, I've:
‚úì Missed important family updates
‚úì Been unable to coordinate with loved ones
‚úì Lost access to years of precious memories and conversations
‚úì Felt isolated from my community

I promise I never intended to violate any policies. If I did something wrong, it was unintentional, and I'm truly sorry. I've learned from this experience and will be extremely careful going forward.

Please, I'm asking for a second chance. This account means everything to me for staying connected with the people I love.

I'm available at ${userEmail} and desperately hoping for your understanding and help.

Thank you so much for taking the time to read this,
${phone}
${userEmail}`,

                technical: `Subject: Technical Account Review Request - ${phone}

WhatsApp Technical Support Team,

I am submitting a technical appeal for account ${phone}, which was flagged on ${formattedDate}.

TECHNICAL DETAILS:
Account: ${phone}
Detection Date: ${formattedDate}
Contact: ${userEmail}

ANALYSIS OF INCIDENT:
${context || 'After thorough analysis, I believe the account restriction resulted from a false positive in the automated detection system.'}

TECHNICAL FACTORS TO CONSIDER:
- Network Configuration: Standard residential/mobile network
- Device: Official hardware running standard OS
- Application: Official WhatsApp client from verified app store
- Usage Patterns: Consistent with legitimate personal use
- API Interactions: None - standard client usage only
- Metadata: No unusual patterns or anomalies

VERIFICATION AVAILABLE:
‚úì Device identification and authentication
‚úì Network logs showing standard usage
‚úì Installation verification from official sources
‚úì Usage history demonstrating legitimate patterns

I request technical review by your engineering team to identify the false positive trigger. I am prepared to provide any additional technical data or logs required for investigation.

This appears to be an automated system error rather than actual policy violation. Manual technical review should confirm legitimate usage patterns.

Technical Contact: ${userEmail}
Account Reference: ${phone}

Best regards,
${userEmail}`,

                business: `Subject: URGENT: Business Account Restoration Request - ${phone}

WhatsApp Business Support Team,

I am writing regarding the critical restriction of business account ${phone} on ${formattedDate}, which is severely impacting business operations.

BUSINESS ACCOUNT INFORMATION:
Business Line: ${phone}
Restriction Date: ${formattedDate}
Business Contact: ${userEmail}

BUSINESS IMPACT:
${context || 'This restriction has caused significant disruption to our business operations and customer communications.'}

OPERATIONAL CONSEQUENCES:
- Customer service channels disrupted
- Active customer conversations terminated
- Business inquiries going unanswered
- Revenue impact from communication breakdown
- Brand reputation concerns

COMPLIANCE VERIFICATION:
‚úì Official WhatsApp Business application in use
‚úì Business verification documents available
‚úì Compliance with business messaging policies
‚úì Customer consent protocols implemented
‚úì Opt-out mechanisms properly configured

IMMEDIATE REQUIREMENTS:
1. Emergency restoration of business communications
2. Explanation of restriction reason
3. Guidance for preventing future issues
4. Access to business account recovery process

Our business operates in full compliance with WhatsApp Business policies. We maintain proper customer consent, respect communication limits, and provide clear business identification.

This interruption is causing measurable business harm. I urgently request prioritized review and restoration.

Business Contact: ${userEmail}
Business Line: ${phone}

Respectfully,
${userEmail}
Business Representative`
            };
            
            return templates[strategy] || templates.ai_optimized;
        }
        
        // Copy to clipboard function
        function copyToClipboard() {
            const appeal = document.getElementById('emailOutput').textContent;
            
            if (appeal === '// APPEAL WILL BE GENERATED HERE') {
                showNotification('‚ö†Ô∏è Generate an appeal first!', 2000);
                return;
            }
            
            navigator.clipboard.writeText(appeal).then(() => {
                showNotification('‚úÖ Appeal copied to clipboard!', 2000);
            }).catch(err => {
                // Fallback method
                const textArea = document.createElement('textarea');
                textArea.value = appeal;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification('‚úÖ Appeal copied to clipboard!', 2000);
                } catch (e) {
                    showNotification('‚ùå Copy failed. Please select and copy manually.', 3000);
                }
                document.body.removeChild(textArea);
            });
        }
        
        // Email client functions
        function openInGmail() {
            openEmailClient('https://mail.google.com/mail/?view=cm&fs=1');
        }
        
        function openInOutlook() {
            openEmailClient('https://outlook.live.com/mail/0/deeplink/compose');
        }
        
        function openInYahoo() {
            openEmailClient('https://compose.mail.yahoo.com/');
        }
        
        function openInDefault() {
            const appeal = document.getElementById('emailOutput').textContent;
            if (appeal === '// APPEAL WILL BE GENERATED HERE') {
                showNotification('‚ö†Ô∏è Generate an appeal first!', 2000);
                return;
            }
            
            const subject = appeal.split('\n')[0].replace('Subject: ', '');
            const body = appeal.split('\n').slice(2).join('\n');
            const emails = 'smb_web@support.whatsapp.com,android@support.whatsapp.com,iphone@support.whatsapp.com,support@support.whatsapp.com';
            
            const mailtoLink = `mailto:${emails}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
            showNotification('üìß Opening default email client...', 2000);
        }
        
        function openEmailClient(baseUrl) {
            const appeal = document.getElementById('emailOutput').textContent;
            if (appeal === '// APPEAL WILL BE GENERATED HERE') {
                showNotification('‚ö†Ô∏è Generate an appeal first!', 2000);
                return;
            }
            
            const subject = appeal.split('\n')[0].replace('Subject: ', '');
            const body = appeal.split('\n').slice(2).join('\n');
            
            let url = `${baseUrl}&to=smb_web@support.whatsapp.com&subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            window.open(url, '_blank');
            showNotification('üìß Email client opened in new tab', 2000);
        }
        
        // Show notification
        function showNotification(message, duration) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.5s ease reverse';
                setTimeout(() => document.body.removeChild(notification), 500);
            }, duration);
        }
        
        // Save to history
        function saveToHistory(appealData) {
            state.appeals.unshift(appealData);
            if (state.appeals.length > 10) state.appeals.pop();
            updateHistoryDisplay();
        }
        
        // Load history
        function loadHistory() {
            updateHistoryDisplay();
        }
        
        // Update history display
        function updateHistoryDisplay() {
            const container = document.getElementById('historyContainer');
            
            if (state.appeals.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; color: var(--quantum-blue); padding: 2rem;">
                        No appeals generated yet. Create your first appeal above!
                    </div>`;
                return;
            }
            
            container.innerHTML = state.appeals.map((appeal, index) => {
                const date = new Date(appeal.timestamp);
                const timeStr = date.toLocaleString();
                
                return `
                    <div class="history-item" onclick="loadAppeal(${index})">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <div style="color: var(--matrix-green); font-weight: bold;">${appeal.phone}</div>
                            <div style="color: var(--quantum-blue); font-size: 0.8rem;">${timeStr}</div>
                        </div>
                        <div style="color: var(--neon-pink); font-size: 0.9rem;">
                            Ban Type: ${appeal.banType.toUpperCase()} | Success: ${appeal.successRate}%
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Load appeal from history
        function loadAppeal(index) {
            const appeal = state.appeals[index];
            document.getElementById('emailOutput').textContent = appeal.appeal;
            document.getElementById('successPrediction').textContent = `üéØ SUCCESS PROBABILITY: ${appeal.successRate}%`;
            state.currentAppeal = appeal;
            showNotification('üìã Appeal loaded from history', 2000);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Toggle checkbox
        function toggleCheckbox(id) {
            const checkbox = document.getElementById(id);
            checkbox.checked = !checkbox.checked;
        }
        
        // Launch full automation
        function launchFullAutomation() {
            if (!state.currentAppeal) {
                showNotification('‚ùå Generate an appeal first!', 2000);
                return;
            }
            
            const status = document.getElementById('automationStatus');
            const progress = document.getElementById('automationProgress');
            const phases = [
                { width: '0%', text: '‚ö° AUTOMATION SYSTEMS: INITIALIZING...', delay: 0 },
                { width: '20%', text: 'üîç PHASE 1: Analyzing ban patterns...', delay: 1000 },
                { width: '40%', text: 'üìß PHASE 2: Multi-channel deployment...', delay: 2500 },
                { width: '60%', text: 'ü§ñ PHASE 3: AI optimization engaged...', delay: 4000 },
                { width: '80%', text: '‚öñÔ∏è PHASE 4: Legal framework prepared...', delay: 5500 },
                { width: '100%', text: '‚úÖ AUTOMATION COMPLETE: All systems active', delay: 7000 }
            ];
            
            phases.forEach(phase => {
                setTimeout(() => {
                    progress.style.width = phase.width;
                    status.textContent = phase.text;
                    
                    if (phase.width === '100%') {
                        const currentRate = parseInt(document.getElementById('successPrediction').textContent.match(/\d+/)[0]);
                        const newRate = Math.min(98, currentRate + 5);
                        document.getElementById('successPrediction').textContent = `üéØ SUCCESS PROBABILITY: ${newRate}%`;
                        showNotification('üöÄ Full automation protocol activated!', 3000);
                    }
                }, phase.delay);
            });
        }
        
        // Initialize on page load
        window.addEventListener('DOMContentLoaded', initSystem);
    </script>
</body>
</html>
